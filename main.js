!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(e,t,r,o){var i=t.handleCardClick,a=t.handleDeleteClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._name=e.name,this._link=e.link,this._id=e._id,this._creatorId=e.owner._id,this._likes=e.likes,this._userId=r,this._handleCardClick=i,this._handleDeleteClick=a,this._handleLikeClick=u,this._cardSelector=o}var r,o;return r=n,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_getId",value:function(){return this._id}},{key:"handleLikeCard",value:function(){var t,n=this,r=this._element.querySelector(".element__like-button");(t=this._likes,function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e._id===n._userId&&r.classList.add("element__like-button_active")}))}},{key:"handleLikeButtonToggle",value:function(e){e.classList.toggle("element__like-button_active")}},{key:"handleLikeCount",value:function(e){this._element.querySelector(".element__like-count").textContent=e}},{key:"handleDeleteCard",value:function(){this._element.remove()}},{key:"_hideBinIcon",value:function(){this._userId!==this._creatorId&&this._element.querySelector(".element__delete-button").classList.add("element__delete-button_type_hidden")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this.handleLikeCount(this._likes.length),this.handleLikeCard(),this._hideBinIcon(),this._element.querySelector(".element__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".element__text").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".element__image"),n=this._element.querySelector(".element__delete-button"),r=this._element.querySelector(".element__like-button");r.addEventListener("click",(function(){return e._handleLikeClick(e._getId(),r)})),n.addEventListener("click",(function(){return e._handleDeleteClick(e._getId())})),t.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})}))}}])&&t(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"loadUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:n,about:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:n})}).then((function(e){return t._handleResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"addNewCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:this.name,link:this.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()})),e._hideInputError(t)}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._toggleButtonState()})),this._setEventListeners()}}])&&u(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._popupElement.classList.contains("popup_opened")&&document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup__close-button")||t.target.classList.contains("popup"))&&e.close()}))}}])&&s(t.prototype,n),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(){return h(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;d(y(a.prototype),"open",this).call(this);var r=this._popupElement.querySelector(".popup__image"),o=this._popupElement.querySelector(".popup__preview-title");r.src=n,r.alt=t,o.textContent=t}}])&&p(t.prototype,n),a}(c);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmit=r,t._formElement=t._popupElement.querySelector(".popup__form"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;g(C(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}},{key:"close",value:function(){g(C(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setSubmitHandler",value:function(e){this._handleSubmit=e}}])&&k(t.prototype,n),a}(c);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}},{key:"getAvatarInfo",value:function(){return{avatar:this._avatar.src}}},{key:"setAvatarInfo",value:function(e){var t=e.avatar;this._avatar.src=t}}])&&L(t.prototype,n),e}(),O={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},j=".popup_type_edit-profile",q=".popup_type_add-card",P=".popup_type_confirm",R=".popup_type_profile-avatar",T=document.querySelector(".profile__edit-button"),A=document.querySelector(".profile__add-button"),U=document.querySelector(".profile__avatar-overlay"),B=document.querySelector(".popup__form_type_edit-profile"),x=document.querySelector(".popup__form_type_add-card"),D=document.querySelector(".popup__form_type_edit-profile-avatar"),V=document.querySelector(".profile__name"),N=document.querySelector(".profile__job"),H=document.querySelector(".profile__avatar"),J=document.querySelector(".popup__input_type_name"),M=document.querySelector(".popup__input_type_job");function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=new o({baseUrl:"https://around.nomoreparties.co/v1/".concat("group-10"),headers:{authorization:"6af9648e-23ea-4651-bc48-5ca8b1b3f30e","Content-Type":"application/json"}}),Y=new l(O,B),F=new l(O,x),G=new l(O,D);function K(e,t,n){document.querySelector(t).querySelector(".popup__button").textContent=n}Y.enableValidation(),F.enableValidation(),G.enableValidation();var Q=new m(".popup_type_preview");Q.setEventListeners();var W=new w({popupSelector:P});W.setEventListeners();var X=new I({name:V,about:N,avatar:H});z.getAppInfo().then((function(e){var t,r,o=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1],l=i._id;X.setAvatarInfo({avatar:i.avatar}),X.setUserInfo({name:i.name,about:i.about});var s=new a({items:u,renderer:f},".elements__list");s.renderItems();var c=new w({popupSelector:q,handleSubmit:function(e){var t=e.name,n=e.link;K(0,q,"Saving..."),z.addCard({name:t,link:n}).then((function(e){f(e),K(0,q,"Save")})).then((function(){return c.close()})).catch((function(e){return console.log(e)}))}});function f(e){var t=new n(e,{handleCardClick:function(e){var t=e.name,n=e.link;return Q.open({name:t,link:n})},handleDeleteClick:function(e){W.open(),W.setSubmitHandler((function(){K(0,P,"Deleting..."),z.deleteCard(e).then((function(){t.handleDeleteCard(),K(0,P,"Yes")})).then((function(){return W.close()})).catch((function(e){return console.log(e)}))}))},handleLikeClick:function(e,n){n.classList.contains("element__like-button_active")?z.deleteLike(e).then((function(e){return t.handleLikeCount(e.likes.length)})).then((function(){return t.handleLikeButtonToggle(n)})).catch((function(e){return console.error(e)})):z.addLike(e).then((function(e){return t.handleLikeCount(e.likes.length)})).then((function(){return t.handleLikeButtonToggle(n)})).catch((function(e){return console.error(e)}))}},l,"#cards-template");s.setItem(t.generateCard())}A.addEventListener("click",(function(){return c.open()})),c.setEventListeners()})).catch((function(e){return console.log(e)}));var Z=new w({popupSelector:j,handleSubmit:function(e){var t=e.name,n=e.about;K(0,j,"Saving..."),z.setUserInfo({name:t,about:n}).then((function(){X.setUserInfo({name:t,about:n}),K(0,j,"Save")})).then((function(){return Z.close()})).catch((function(e){return console.log(e)}))}});Z.setEventListeners();var ee=new w({popupSelector:R,handleSubmit:function(e){var t=e.avatar;K(0,R,"Saving..."),z.setUserAvatar({avatar:t}).then((function(e){var t=e.avatar;X.setAvatarInfo({avatar:t}),K(0,R,"Save")})).then((function(){return ee.close()})).catch((function(e){return console.log(e)}))}});ee.setEventListeners(),T.addEventListener("click",(function(){var e=X.getUserInfo(),t=e.name,n=e.about;J.value=t,M.value=n,Z.open()})),U.addEventListener("click",(function(){return ee.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxLQUFBQSxFQUFNNEQsTUFBQUEsSUFDcEJULE1BQUssV0FDSmtILEVBQVNLLFlBQVksQ0FBRTFLLEtBQUFBLEVBQU00RCxNQUFBQSxJQUM3QmlHLEVBQWMsRUFBTXJCLEVBQWtCLFdBRXZDckYsTUFBSyxrQkFBTTRJLEVBQWM3RSxXQUN6QjhELE9BQU0sU0FBQ0MsR0FBRCxPQUFTQyxRQUFRQyxJQUFJRixTQUlsQ2MsRUFBYzVCLG9CQUdkLElBQU02QixHQUFxQixJQUFJckUsRUFBYyxDQUMzQ2YsY0FBZStCLEVBQ2ZmLGFBQWMsWUFBZ0IsSUFBYi9ELEVBQWEsRUFBYkEsT0FDZmdHLEVBQWMsRUFBTWxCLEVBQW9CLGFBQ3hDWSxFQUNHMEMsY0FBYyxDQUFFcEksT0FBQUEsSUFDaEJWLE1BQUssWUFBZ0IsSUFBYlUsRUFBYSxFQUFiQSxPQUNQd0csRUFBU0ksY0FBYyxDQUFFNUcsT0FBQUEsSUFDekJnRyxFQUFjLEVBQU9sQixFQUFvQixXQUUxQ3hGLE1BQUssa0JBQU02SSxHQUFtQjlFLFdBQzlCOEQsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLElBQUlGLFNBSWxDZSxHQUFtQjdCLG9CQUduQnZCLEVBQWtCdkcsaUJBQWlCLFNBQVMsV0FFMUMsTUFBd0JnSSxFQUFTNkIsY0FBekJsTSxFQUFSLEVBQVFBLEtBQU00RCxFQUFkLEVBQWNBLE1BQ2R5RixFQUFxQnJCLE1BQVFoSSxFQUM3QnNKLEVBQW9CdEIsTUFBUXBFLEVBQzVCbUksRUFBY1YsVUFHaEJ2QyxFQUFvQnpHLGlCQUFpQixTQUFTLGtCQUFNMkosR0FBbUJYLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcbiAgICB1c2VyRGF0YSxcbiAgICBjYXJkU2VsZWN0b3JcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fY3JlYXRvcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuXG4gICAgdGhpcy5fdXNlcklkID0gdXNlckRhdGE7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9nZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBoYW5kbGVMaWtlQ2FyZCgpIHtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIFsuLi50aGlzLl9saWtlc10uZm9yRWFjaCgobGlrZSkgPT4ge1xuICAgICAgaWYgKGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTGlrZUJ1dHRvblRvZ2dsZShsaWtlQnV0dG9uKSB7XG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgaGFuZGxlTGlrZUNvdW50KHRvdGFsTGlrZXMpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudFwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0b3RhbExpa2VzO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX2hpZGVCaW5JY29uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX2NyZWF0b3JJZCkge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fZGVsZXRlLWJ1dHRvbl90eXBlX2hpZGRlblwiKTtcbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5oYW5kbGVMaWtlQ291bnQodGhpcy5fbGlrZXMubGVuZ3RoKTtcbiAgICB0aGlzLmhhbmRsZUxpa2VDYXJkKCk7XG4gICAgdGhpcy5faGlkZUJpbkljb24oKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRfX2ltYWdlXCJcbiAgICApLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IHBvcHVwSW1hZ2VQcmV2aWV3ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCIpO1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIik7XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2dldElkKCksIGxpa2VCdXR0b24pXG4gICAgKTtcblxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2dldElkKCkpXG4gICAgKTtcblxuICAgIHBvcHVwSW1hZ2VQcmV2aWV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcbiAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgICAgbGluazogdGhpcy5fbGluayxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxuICAgICAgKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKVxuICAgICk7XG4gIH1cblxuICBsb2FkVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIG9mIHR5cGUgUmVzcG9uc2UgdGhhdCB3YWl0cyBmb3IgdXNlciBpbmZvcm1hdGlvbiBhbmQgY2FyZCBkYXRhIGZyb20gc2VydmVyXG4gICAqIEByZXR1cm5zIFByb21pc2U8UmVzcG9uc2U+XG4gICAqL1xuICBnZXRBcHBJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5sb2FkVXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICAvKipcbiAgICpSZXR1cm5zIGEgUHJvbWlzZSBvZiB0eXBlIFJlc3BvbnNlIHRoYXQgeWllbGRzIHVzZXIgYXZhdGFyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhdmF0YXIgdXJsIG9mIHRoZSB1c2VyJ3MgcHJvZmlsZVxuICAgKiBAcmV0dXJucyBQcm9taXNlPFJlc3BvbnNlPlxuICAgKi9cbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFByb21pc2Ugb2YgdHlwZSBSZXNwb25zZSB0aGF0IHlpZWxkcyBhXG4gICAqIHNpbmdsZSBjYXJkIGdpdmVuIGFuIElEXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYXJkSWQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGNhcmRcbiAgICogQHJldHVybnMgUHJvbWlzZTxSZXNwb25zZT5cbiAgICovXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IHRoaXMubmFtZSwgbGluazogdGhpcy5saW5rIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgc2V0SXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGRpc2FibGUgc3VibWl0IGJ1dHRvbiBvbiBsb2FkaW5nXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIC8vIHZhbGlkYXRlIGFsbCBpbnB1dHNcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAvLyBjaGVjayB3aGVuZXZlciBhbnkgZmllbGQncyBpbnB1dCBpcyBjaGFuZ2VkXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBhZnRlciByZXNldHRpbmcgZm9ybSwgdmFsaWRhdGlvbiBtZXNzYWdlcyBzaG91bGQgYWxzbyByZXNldFxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIGNsb3NlIHRoZSBQb3B1cCBieSBQcmVzc2luZyBFc2NhcGUga2V5XG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuXG4gICAgaWYgKHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtYnV0dG9uXCIpIHx8IC8vIGNsb3NlIGljb24gb2YgdGhlIHBvcHVwXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgLy8gb3V0c2lkZSBjbGlja1xuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy10aXRsZVwiKTtcbiAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgIGltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cblxuICBzZXRTdWJtaXRIYW5kbGVyKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIHRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2VcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIGdldEF2YXRhckluZm8oKSB7XG4gICAgcmV0dXJuIHsgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjIH07XG4gIH1cblxuICBzZXRBdmF0YXJJbmZvKHsgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiZXhwb3J0IGNvbnN0IGRlZmF1bHRGb3JtQ29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjY2FyZHMtdGVtcGxhdGVcIjtcbmV4cG9ydCBjb25zdCBlbGVtZW50c0xpc3QgPSBcIi5lbGVtZW50c19fbGlzdFwiO1xuXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCI7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3ID0gXCIucG9wdXBfdHlwZV9wcmV2aWV3XCI7XG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybSA9IFwiLnBvcHVwX3R5cGVfY29uZmlybVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUF2YXRhciA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1hdmF0YXJcIjtcblxuLy8gQnV0dG9uc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5XCJcbik7XG5cbi8vIFBvcHVwIGZvcm1zXG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LXByb2ZpbGVcIlxuKTtcbmV4cG9ydCBjb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV90eXBlX2VkaXQtcHJvZmlsZS1hdmF0YXJcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV9qb2JcIlxuKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBUT0tFTiwgR1JPVVBfSUQgfSBmcm9tIFwiLi4vdXRpbHMvY29uZmlnLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcbmltcG9ydCB7XG4gIGVkaXRGb3JtRWxlbWVudCxcbiAgY2FyZEZvcm1FbGVtZW50LFxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHBvcHVwQWRkQ2FyZCxcbiAgY2FyZFRlbXBsYXRlLFxuICBlbGVtZW50c0xpc3QsXG4gIHBvcHVwRWRpdFByb2ZpbGUsXG4gIHBvcHVwUHJldmlldyxcbiAgcG9wdXBDb25maXJtLFxuICBwb3B1cFByb2ZpbGVBdmF0YXIsXG4gIGFkZENhcmRCdXR0b24sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlQWJvdXQsXG4gIHByb2ZpbGVBdmF0YXIsXG4gIHByb2ZpbGVBdmF0YXJFbGVtZW50LFxuICBwcm9maWxlQXZhdGFyQnV0dG9uLFxuICBwcm9maWxlRm9ybU5hbWVJbnB1dCxcbiAgcHJvZmlsZUZvcm1Kb2JJbnB1dCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCB0b2tlbiA9IHByb2Nlc3MuZW52LlRPS0VOIHx8IFRPS0VOO1xuY29uc3QgZ3JvdXBJZCA9IHByb2Nlc3MuZW52LkdST1VQX0lEIHx8IEdST1VQX0lEO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogYGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvJHtncm91cElkfWAsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiB0b2tlbixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLyBGb3JtIFZhbGlkYXRvcnNcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIGVkaXRGb3JtRWxlbWVudCk7XG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCBjYXJkRm9ybUVsZW1lbnQpO1xuY29uc3QgZWRpdEF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcbiAgcHJvZmlsZUF2YXRhckVsZW1lbnRcbik7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmVkaXRBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBIYW5kbGUgTG9hZGluZ1xuZnVuY3Rpb24gaGFuZGxlTG9hZGluZyhpc0xvYWRpbmcsIHBvcHVwLCB0ZXh0SW5wdXQpIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0ZXh0SW5wdXQ7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cCkucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRleHRJbnB1dDtcbiAgfVxufVxuXG4vLyBQcmV2aWV3IEltYWdlIFBvcHVwXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwUHJldmlldyk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIERlbGV0ZSBjYXJkIGNvbmZpcm1hdGlvbiBwb3B1cFxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpcm0sXG59KTtcblxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIFByb2ZpbGUgQ2FyZCBGb3JtIHdpdGggQVBJXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWU6IHByb2ZpbGVOYW1lLFxuICBhYm91dDogcHJvZmlsZUFib3V0LFxuICBhdmF0YXI6IHByb2ZpbGVBdmF0YXIsXG59KTtcblxuLy8gY29uc29sZS5sb2coYXBpLmdldEFwcEluZm8oKSk7XG5cbi8vIHJlbmRlciB0aGUgY2FyZHMgdG8gdGhlIERPTVxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFt1c2VyRGF0YSwgaW5pdGlhbENhcmRzTGlzdF0pID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG5cbiAgICAvLyB1cGRhdGUgdXNlciBpbmZvIGFuZCBhdmF0YXJcbiAgICB1c2VySW5mby5zZXRBdmF0YXJJbmZvKHsgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIgfSk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyRGF0YS5uYW1lLCBhYm91dDogdXNlckRhdGEuYWJvdXQgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBDYXJkc1xuICAgIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzTGlzdCxcbiAgICAgICAgcmVuZGVyZXI6IGNyZWF0ZUNhcmQsXG4gICAgICB9LFxuICAgICAgZWxlbWVudHNMaXN0XG4gICAgKTtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcblxuICAgIC8vIEFkZCBOZXcgQ2FyZFxuICAgIGNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQWRkQ2FyZCxcbiAgICAgIGhhbmRsZVN1Ym1pdDogKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgICAgIGhhbmRsZUxvYWRpbmcodHJ1ZSwgcG9wdXBBZGRDYXJkLCBcIlNhdmluZy4uLlwiKTtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmFkZENhcmQoeyBuYW1lLCBsaW5rIH0pXG4gICAgICAgICAgLnRoZW4oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgICAgICBoYW5kbGVMb2FkaW5nKGZhbHNlLCBwb3B1cEFkZENhcmQsIFwiU2F2ZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCgpID0+IG5ld0NhcmRQb3B1cC5jbG9zZSgpKVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBzaG93IHBvcHVwIGZvciBhZGRpbmcgYSBuZXcgY2FyZFxuICAgIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5ld0NhcmRQb3B1cC5vcGVuKCkpO1xuICAgIG5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy8gQ3JlYXRlIENhcmRzXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtcykge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICBpdGVtcyxcbiAgICAgICAge1xuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKHsgbmFtZSwgbGluayB9KSA9PiBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pLFxuICAgICAgICAgIC8vIERlbGV0ZSBDYXJkIFBvcHVwXG4gICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkSWQpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgICAgICAgICAgIGhhbmRsZUxvYWRpbmcodHJ1ZSwgcG9wdXBDb25maXJtLCBcIkRlbGV0aW5nLi4uXCIpO1xuICAgICAgICAgICAgICBhcGlcbiAgICAgICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwQ29uZmlybSwgXCJZZXNcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIExpa2UgQ2FyZFxuICAgICAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRJZCwgbGlrZUJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlXCIpKSB7XG4gICAgICAgICAgICAgIGFwaVxuICAgICAgICAgICAgICAgIC5kZWxldGVMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gY2FyZC5oYW5kbGVMaWtlQ291bnQoZGF0YS5saWtlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGNhcmQuaGFuZGxlTGlrZUJ1dHRvblRvZ2dsZShsaWtlQnV0dG9uKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFwaVxuICAgICAgICAgICAgICAgIC5hZGRMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gY2FyZC5oYW5kbGVMaWtlQ291bnQoZGF0YS5saWtlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGNhcmQuaGFuZGxlTGlrZUJ1dHRvblRvZ2dsZShsaWtlQnV0dG9uKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGNhcmRUZW1wbGF0ZVxuICAgICAgKTtcbiAgICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG4vLyBFZGl0IFByb2ZpbGUgRm9ybSB3aXRoIEFQSVxuY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBFZGl0UHJvZmlsZSxcbiAgaGFuZGxlU3VibWl0OiAoeyBuYW1lLCBhYm91dCB9KSA9PiB7XG4gICAgaGFuZGxlTG9hZGluZyh0cnVlLCBwb3B1cEVkaXRQcm9maWxlLCBcIlNhdmluZy4uLlwiKTtcbiAgICBhcGlcbiAgICAgIC5zZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XG4gICAgICAgIGhhbmRsZUxvYWRpbmcodHJ1ZSwgcG9wdXBFZGl0UHJvZmlsZSwgXCJTYXZlXCIpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHVzZXJJbmZvUG9wdXAuY2xvc2UoKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSxcbn0pO1xuXG51c2VySW5mb1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIFVwZGF0ZSBQcm9maWxlIEF2YXRhclxuY29uc3QgcHJvZmlsZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cFByb2ZpbGVBdmF0YXIsXG4gIGhhbmRsZVN1Ym1pdDogKHsgYXZhdGFyIH0pID0+IHtcbiAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwUHJvZmlsZUF2YXRhciwgXCJTYXZpbmcuLi5cIik7XG4gICAgYXBpXG4gICAgICAuc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KVxuICAgICAgLnRoZW4oKHsgYXZhdGFyIH0pID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0QXZhdGFySW5mbyh7IGF2YXRhciB9KTtcbiAgICAgICAgaGFuZGxlTG9hZGluZyhmYWxzZSwgcG9wdXBQcm9maWxlQXZhdGFyLCBcIlNhdmVcIik7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4gcHJvZmlsZUF2YXRhclBvcHVwLmNsb3NlKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH0sXG59KTtcblxucHJvZmlsZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gcHJlcG9wdWxhdGUgcHJvZmlsZSBmb3JtIGF0IGluaXRpYWwgbG9hZFxuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRm9ybU5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIHByb2ZpbGVGb3JtSm9iSW5wdXQudmFsdWUgPSBhYm91dDtcbiAgdXNlckluZm9Qb3B1cC5vcGVuKCk7XG59KTtcblxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcHJvZmlsZUF2YXRhclBvcHVwLm9wZW4oKSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJ1c2VyRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9jcmVhdG9ySWQiLCJvd25lciIsIl9saWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJsaWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJmb3JFYWNoIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZSIsInRvdGFsTGlrZXMiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImhhbmRsZUxpa2VDb3VudCIsImxlbmd0aCIsImhhbmRsZUxpa2VDYXJkIiwiX2hpZGVCaW5JY29uIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwb3B1cEltYWdlUHJldmlldyIsImRlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZ2V0SWQiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwiYWxsIiwibG9hZFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImF2YXRhciIsImNhcmRJZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJlIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlIiwidGV4dCIsInNyYyIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJhY3Rpb24iLCJVc2VySW5mbyIsIl9hYm91dCIsIl9hdmF0YXIiLCJkZWZhdWx0Rm9ybUNvbmZpZyIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJwb3B1cENvbmZpcm0iLCJwb3B1cFByb2ZpbGVBdmF0YXIiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJwcm9maWxlQXZhdGFyQnV0dG9uIiwiZWRpdEZvcm1FbGVtZW50IiwiY2FyZEZvcm1FbGVtZW50IiwicHJvZmlsZUF2YXRhckVsZW1lbnQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVBYm91dCIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlRm9ybU5hbWVJbnB1dCIsInByb2ZpbGVGb3JtSm9iSW5wdXQiLCJhcGkiLCJwcm9jZXNzIiwiYXV0aG9yaXphdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJlZGl0QXZhdGFyVmFsaWRhdG9yIiwiaGFuZGxlTG9hZGluZyIsImlzTG9hZGluZyIsInBvcHVwIiwidGV4dElucHV0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImltYWdlUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsImRlbGV0ZUNhcmRQb3B1cCIsInVzZXJJbmZvIiwiZ2V0QXBwSW5mbyIsImluaXRpYWxDYXJkc0xpc3QiLCJ1c2VySWQiLCJzZXRBdmF0YXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXJkc0xpc3QiLCJjcmVhdGVDYXJkIiwicmVuZGVySXRlbXMiLCJuZXdDYXJkUG9wdXAiLCJhZGRDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2FyZCIsIm9wZW4iLCJzZXRTdWJtaXRIYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJkZWxldGVMaWtlIiwiaGFuZGxlTGlrZUJ1dHRvblRvZ2dsZSIsImVycm9yIiwiYWRkTGlrZSIsInNldEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJ1c2VySW5mb1BvcHVwIiwicHJvZmlsZUF2YXRhclBvcHVwIiwic2V0VXNlckF2YXRhciIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==