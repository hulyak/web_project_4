!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o){var i=n.handleCardClick,a=n.handleDeleteClick,u=n.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._id=e._id,this._creatorId=e.owner._id,this._likes=e.likes,this._likeCount=e.likes.length,this._userId=r,this._handleCardClick=i,this._handleDeleteClick=a,this._handleLikeClick=u,this._cardSelector=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_handleLikeButtonToggle",value:function(e){e.target.classList.toggle("element__like-button_active")}},{key:"_getId",value:function(){return this._id}},{key:"handleDeleteCard",value:function(){this._element.remove()}},{key:"setLikeCount",value:function(e){this._likeCount=e}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._hideBinIcon(),this._element.querySelector(".element__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".element__text").textContent=this._name,this._element}},{key:"_hideBinIcon",value:function(){this._userId!==this._creatorId&&this._element.querySelector(".element__delete-button").classList.add("element__delete-button_type_hidden")}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".element__like-button"),n=this._element.querySelector(".element__image"),r=this._element.querySelector(".element__delete-button");t.addEventListener("click",(function(t){return e._handleLikeButtonToggle(t)})),r.addEventListener("click",(function(){return e._handleDeleteClick(e._getId())})),n.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,r;return t=e,(r=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"loadUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,"Content-Type":"application/json",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH","Content-Type":"application/json",body:JSON.stringify({name:n,about:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:n})}).then((function(e){return t._handleResponse(e)}))}},{key:"addLikes",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteLikes",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"addNewCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:this.name,link:this.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()})),e._hideInputError(t)}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._toggleButtonState()})),this._setEventListeners()}}])&&a(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._popupElement.classList.contains("popup_opened")&&document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup__close-button")||t.target.classList.contains("popup"))&&e.close()}))}}])&&s(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(){return f(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;h(v(a.prototype),"open",this).call(this);var r=this._popupElement.querySelector(".popup__image"),o=this._popupElement.querySelector(".popup__preview-title");r.src=n,r.alt=t,o.textContent=t}}])&&p(t.prototype,n),a}(l);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmit=r,t._formElement=t._popupElement.querySelector(".popup__form"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;k(S(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){k(S(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setSubmitHandler",value:function(e){this._handleSubmit=e}}])&&b(t.prototype,n),a}(l);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}},{key:"getAvatarInfo",value:function(){return{avatar:this._avatar.src}}},{key:"setAvatarInfo",value:function(e){var t=e.avatar;this._avatar.src=t}}])&&w(t.prototype,n),e}(),I={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},O=".popup_type_edit-profile",j=".popup_type_add-card",q=".popup_type_confirm",P=".popup_type_profile-avatar",R=document.querySelector(".profile__edit-button"),T=document.querySelector(".profile__add-button"),U=document.querySelector(".profile__avatar-overlay"),B=document.querySelector(".popup__form_type_edit-profile"),A=document.querySelector(".popup__form_type_add-card"),x=document.querySelector(".popup__form_type_edit-profile-avatar"),D=document.querySelector(".profile__name"),V=document.querySelector(".profile__job"),N=document.querySelector(".profile__avatar"),H=document.querySelector(".popup__input_type_name"),J=document.querySelector(".popup__input_type_job");function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=new r({baseUrl:"https://around.nomoreparties.co/v1/".concat("group-10"),headers:{authorization:"6af9648e-23ea-4651-bc48-5ca8b1b3f30e","Content-Type":"application/json"}}),Y=new u(I,B),$=new u(I,A),F=new u(I,x);function G(e,t,n){document.querySelector(t).querySelector(".popup__button").textContent=n}Y.enableValidation(),$.enableValidation(),F.enableValidation();var K=new y(".popup_type_preview");K.setEventListeners(),console.log(z.getAppInfo());var Q=new C({popupSelector:q});Q.setEventListeners(),z.getAppInfo().then((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],u=o[1],s=a._id,l=new i({items:u,renderer:f},".elements__list");l.renderItems();var c=new C({popupSelector:j,handleSubmit:function(e){var t=e.name,n=e.link;G(0,j,"Saving..."),z.addCard({name:t,link:n}).then((function(e){f(e),G(0,j,"Save")})).catch((function(e){return console.log(e)}))}});function f(e){var n=new t(e,{handleCardClick:function(e){var t=e.name,n=e.link;return K.open({name:t,link:n})},handleDeleteClick:function(e){Q.open(),Q.setSubmitHandler((function(){G(0,q,"Deleting..."),z.deleteCard(e).then((function(){n.handleDeleteCard(),G(0,q,"Yes")})).catch((function(e){return console.log(e)}))}))}},s,"#cards-template");l.setItem(n.generateCard())}T.addEventListener("click",(function(){return c.open()})),c.setEventListeners()})).catch((function(e){return console.log(e)}));var W=new L({name:D,about:V,avatar:N}),X=new C({popupSelector:O,handleSubmit:function(e){var t=e.name,n=e.about;G(0,O,"Saving..."),z.setUserInfo({name:t,about:n}).then((function(){W.setUserInfo({name:t,about:n})})).catch((function(e){return console.log(e)}))}});X.setEventListeners();var Z=new C({popupSelector:P,handleSubmit:function(e){var t=e.avatar;G(0,P,"Saving..."),z.setUserAvatar({avatar:t}).then((function(e){var t=e.avatar;W.setAvatarInfo({avatar:t}),G(0,P,"Save")})).catch((function(e){return console.log(e)}))}});Z.setEventListeners(),z.loadUserInfo().then((function(e){var t=e.avatar;W.setAvatarInfo({avatar:t})})).catch((function(e){return console.log(e)})),z.loadUserInfo().then((function(e){var t=e.name,n=e.about;W.setUserInfo({name:t,about:n})})).catch((function(e){return console.log(e)})),R.addEventListener("click",(function(){var e=W.getUserInfo(),t=e.name,n=e.about;H.value=t,J.value=n,X.open()})),U.addEventListener("click",(function(){return Z.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BRTlCa0gsT0FBTSxTQUFDQyxHQUFELE9BQVNaLFFBQVFDLElBQUlXLE1BRzlCcEMsRUFBa0J2RyxpQkFBaUIsU0FBUyxXQUUxQyxNQUF3Qm1KLEVBQVNNLGNBQXpCN0wsRUFBUixFQUFRQSxLQUFNNEQsRUFBZCxFQUFjQSxNQUNkd0YsRUFBcUJyQixNQUFRL0gsRUFDN0JxSixFQUFvQnRCLE1BQVFuRSxFQUM1QjRILEVBQWNQLFVBR2hCcEMsRUFBb0J6RyxpQkFBaUIsU0FBUyxrQkFBTXNKLEVBQW1CVCxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIHsgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrIH0sXG4gICAgdXNlckRhdGEsXG4gICAgY2FyZFNlbGVjdG9yXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2NyZWF0b3JJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9saWtlQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcblxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJEYXRhO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvblRvZ2dsZShldnQpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgc2V0TGlrZUNvdW50KGNvdW50KSB7XG4gICAgdGhpcy5fbGlrZUNvdW50ID0gY291bnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5faGlkZUJpbkljb24oKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRfX2ltYWdlXCJcbiAgICApLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2hpZGVCaW5JY29uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX2NyZWF0b3JJZCkge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fZGVsZXRlLWJ1dHRvbl90eXBlX2hpZGRlblwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKTtcblxuICAgIGNvbnN0IHBvcHVwSW1hZ2VQcmV2aWV3ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PlxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvblRvZ2dsZShldnQpXG4gICAgKTtcblxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2dldElkKCkpXG4gICAgKTtcblxuICAgIHBvcHVwSW1hZ2VQcmV2aWV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcbiAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgICAgbGluazogdGhpcy5fbGluayxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxuICAgICAgKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKVxuICAgICk7XG4gIH1cblxuICBsb2FkVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIG9mIHR5cGUgUmVzcG9uc2UgdGhhdCB3YWl0cyBmb3IgdXNlciBpbmZvcm1hdGlvbiBhbmQgY2FyZCBkYXRhIGZyb20gc2VydmVyXG4gICAqIEByZXR1cm5zIFByb21pc2U8UmVzcG9uc2U+XG4gICAqL1xuICBnZXRBcHBJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5sb2FkVXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgLyoqXG4gICAqUmV0dXJucyBhIFByb21pc2Ugb2YgdHlwZSBSZXNwb25zZSB0aGF0IHlpZWxkcyB1c2VyIGF2YXRhclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXZhdGFyIHVybCBvZiB0aGUgdXNlcidzIHByb2ZpbGVcbiAgICogQHJldHVybnMgUHJvbWlzZTxSZXNwb25zZT5cbiAgICovXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIG9mIHR5cGUgUmVzcG9uc2UgdGhhdCB5aWVsZHMgYVxuICAgKiBzaW5nbGUgY2FyZCBnaXZlbiBhbiBJRFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FyZElkIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBjYXJkXG4gICAqIEByZXR1cm5zIFByb21pc2U8UmVzcG9uc2U+XG4gICAqL1xuICBhZGRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IHRoaXMubmFtZSwgbGluazogdGhpcy5saW5rIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgc2V0SXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGRpc2FibGUgc3VibWl0IGJ1dHRvbiBvbiBsb2FkaW5nXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIC8vIHZhbGlkYXRlIGFsbCBpbnB1dHNcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAvLyBjaGVjayB3aGVuZXZlciBhbnkgZmllbGQncyBpbnB1dCBpcyBjaGFuZ2VkXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBhZnRlciByZXNldHRpbmcgZm9ybSwgdmFsaWRhdGlvbiBtZXNzYWdlcyBzaG91bGQgYWxzbyByZXNldFxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIGNsb3NlIHRoZSBQb3B1cCBieSBQcmVzc2luZyBFc2NhcGUga2V5XG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuXG4gICAgaWYgKHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtYnV0dG9uXCIpIHx8IC8vIGNsb3NlIGljb24gb2YgdGhlIHBvcHVwXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgLy8gb3V0c2lkZSBjbGlja1xuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy10aXRsZVwiKTtcbiAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgIGltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cblxuICBzZXRTdWJtaXRIYW5kbGVyKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIHRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2VcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIGdldEF2YXRhckluZm8oKSB7XG4gICAgcmV0dXJuIHsgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjIH07XG4gIH1cblxuICBzZXRBdmF0YXJJbmZvKHsgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiZXhwb3J0IGNvbnN0IGRlZmF1bHRGb3JtQ29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjY2FyZHMtdGVtcGxhdGVcIjtcbmV4cG9ydCBjb25zdCBlbGVtZW50c0xpc3QgPSBcIi5lbGVtZW50c19fbGlzdFwiO1xuXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCI7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3ID0gXCIucG9wdXBfdHlwZV9wcmV2aWV3XCI7XG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybSA9IFwiLnBvcHVwX3R5cGVfY29uZmlybVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUF2YXRhciA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1hdmF0YXJcIjtcblxuLy8gQnV0dG9uc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5XCJcbik7XG5cbi8vIFBvcHVwIGZvcm1zXG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LXByb2ZpbGVcIlxuKTtcbmV4cG9ydCBjb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV90eXBlX2VkaXQtcHJvZmlsZS1hdmF0YXJcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV9qb2JcIlxuKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcbmltcG9ydCB7XG4gIGVkaXRGb3JtRWxlbWVudCxcbiAgY2FyZEZvcm1FbGVtZW50LFxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHBvcHVwQWRkQ2FyZCxcbiAgY2FyZFRlbXBsYXRlLFxuICBlbGVtZW50c0xpc3QsXG4gIHBvcHVwRWRpdFByb2ZpbGUsXG4gIHBvcHVwUHJldmlldyxcbiAgcG9wdXBDb25maXJtLFxuICBwb3B1cFByb2ZpbGVBdmF0YXIsXG4gIGFkZENhcmRCdXR0b24sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlQWJvdXQsXG4gIHByb2ZpbGVBdmF0YXIsXG4gIHByb2ZpbGVBdmF0YXJFbGVtZW50LFxuICBwcm9maWxlQXZhdGFyQnV0dG9uLFxuICBwcm9maWxlRm9ybU5hbWVJbnB1dCxcbiAgcHJvZmlsZUZvcm1Kb2JJbnB1dCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogYGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvJHtwcm9jZXNzLmVudi5HUk9VUF9JRH1gLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogcHJvY2Vzcy5lbnYuVE9LRU4sXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8gRm9ybSBWYWxpZGF0b3JzXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCBlZGl0Rm9ybUVsZW1lbnQpO1xuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihkZWZhdWx0Rm9ybUNvbmZpZywgY2FyZEZvcm1FbGVtZW50KTtcbmNvbnN0IGVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgZGVmYXVsdEZvcm1Db25maWcsXG4gIHByb2ZpbGVBdmF0YXJFbGVtZW50XG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gSGFuZGxlIExvYWRpbmdcbmZ1bmN0aW9uIGhhbmRsZUxvYWRpbmcoaXNMb2FkaW5nLCBwb3B1cCwgdGV4dElucHV0KSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIikudGV4dENvbnRlbnQgPVxuICAgICAgdGV4dElucHV0O1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0ZXh0SW5wdXQ7XG4gIH1cbn1cblxuLy8gUHJldmlldyBJbWFnZSBQb3B1cFxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFByZXZpZXcpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zb2xlLmxvZyhhcGkuZ2V0QXBwSW5mbygpKTtcblxuLy8gRGVsZXRlIGNhcmQgY29uZmlybWF0aW9uIHBvcHVwXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlybSxcbn0pO1xuXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gcmVuZGVyIHRoZSBjYXJkcyB0byB0aGUgRE9NXG5hcGlcbiAgLmdldEFwcEluZm8oKVxuICAudGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNMaXN0XSkgPT4ge1xuICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICAvLyBHZW5lcmF0ZSBDYXJkc1xuICAgIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzTGlzdCxcbiAgICAgICAgcmVuZGVyZXI6IGNyZWF0ZUNhcmQsXG4gICAgICB9LFxuICAgICAgZWxlbWVudHNMaXN0XG4gICAgKTtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcblxuICAgIC8vIEFkZCBOZXcgQ2FyZFxuICAgIGNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQWRkQ2FyZCxcbiAgICAgIGhhbmRsZVN1Ym1pdDogKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgICAgIGhhbmRsZUxvYWRpbmcodHJ1ZSwgcG9wdXBBZGRDYXJkLCBcIlNhdmluZy4uLlwiKTtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmFkZENhcmQoeyBuYW1lLCBsaW5rIH0pXG4gICAgICAgICAgLnRoZW4oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgICAgICBoYW5kbGVMb2FkaW5nKGZhbHNlLCBwb3B1cEFkZENhcmQsIFwiU2F2ZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBzaG93IHBvcHVwIGZvciBhZGRpbmcgYSBuZXcgY2FyZFxuICAgIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5ld0NhcmRQb3B1cC5vcGVuKCkpO1xuICAgIG5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy8gQ3JlYXRlIENhcmRzXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtcykge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICBpdGVtcyxcbiAgICAgICAge1xuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKHsgbmFtZSwgbGluayB9KSA9PiBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pLFxuICAgICAgICAgIC8vIERlbGV0ZSBDYXJkIFBvcHVwXG4gICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkSWQpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgICAgICAgICAgIGhhbmRsZUxvYWRpbmcodHJ1ZSwgcG9wdXBDb25maXJtLCBcIkRlbGV0aW5nLi4uXCIpO1xuICAgICAgICAgICAgICBhcGlcbiAgICAgICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwQ29uZmlybSwgXCJZZXNcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGNhcmRUZW1wbGF0ZVxuICAgICAgKTtcbiAgICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG4vLyBQcm9maWxlIENhcmQgRm9ybSB3aXRoIEFQSVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBwcm9maWxlTmFtZSxcbiAgYWJvdXQ6IHByb2ZpbGVBYm91dCxcbiAgYXZhdGFyOiBwcm9maWxlQXZhdGFyLFxufSk7XG5cbi8vIEVkaXQgUHJvZmlsZSBGb3JtIHdpdGggQVBJXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEVkaXRQcm9maWxlLFxuICBoYW5kbGVTdWJtaXQ6ICh7IG5hbWUsIGFib3V0IH0pID0+IHtcbiAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwRWRpdFByb2ZpbGUsIFwiU2F2aW5nLi4uXCIpO1xuICAgIGFwaVxuICAgICAgLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH0sXG59KTtcblxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBVcGRhdGUgUHJvZmlsZSBBdmF0YXJcbmNvbnN0IHByb2ZpbGVBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBQcm9maWxlQXZhdGFyLFxuICBoYW5kbGVTdWJtaXQ6ICh7IGF2YXRhciB9KSA9PiB7XG4gICAgaGFuZGxlTG9hZGluZyh0cnVlLCBwb3B1cFByb2ZpbGVBdmF0YXIsIFwiU2F2aW5nLi4uXCIpO1xuICAgIGFwaVxuICAgICAgLnNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSlcbiAgICAgIC50aGVuKCh7IGF2YXRhciB9KSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckluZm8oeyBhdmF0YXIgfSk7XG4gICAgICAgIGhhbmRsZUxvYWRpbmcoZmFsc2UsIHBvcHVwUHJvZmlsZUF2YXRhciwgXCJTYXZlXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSxcbn0pO1xuXG5wcm9maWxlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gSW5pdGlhbCBwYWdlIGxvYWQgLSB1cGRhdGUgdXNlciBpbmZvIGFuZCBhdmF0YXJcbmFwaVxuICAubG9hZFVzZXJJbmZvKClcbiAgLnRoZW4oKHsgYXZhdGFyIH0pID0+IHtcbiAgICB1c2VySW5mby5zZXRBdmF0YXJJbmZvKHsgYXZhdGFyIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbmFwaVxuICAubG9hZFVzZXJJbmZvKClcbiAgLnRoZW4oKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyBwcmVwb3B1bGF0ZSBwcm9maWxlIGZvcm0gYXQgZmlyc3QgY2xpY2tcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUZvcm1OYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlRm9ybUpvYklucHV0LnZhbHVlID0gYWJvdXQ7XG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHByb2ZpbGVBdmF0YXJQb3B1cC5vcGVuKCkpO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidXNlckRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfY3JlYXRvcklkIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlQ291bnQiLCJsZW5ndGgiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9lbGVtZW50IiwicmVtb3ZlIiwiY291bnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGlkZUJpbkljb24iLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRleHRDb250ZW50IiwiYWRkIiwibGlrZUJ1dHRvbiIsInBvcHVwSW1hZ2VQcmV2aWV3IiwiZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uVG9nZ2xlIiwiX2dldElkIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsImFsbCIsImxvYWRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhdmF0YXIiLCJjYXJkSWQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImUiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJ0ZXh0Iiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImFjdGlvbiIsIlVzZXJJbmZvIiwiX2Fib3V0IiwiX2F2YXRhciIsImRlZmF1bHRGb3JtQ29uZmlnIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwQWRkQ2FyZCIsInBvcHVwQ29uZmlybSIsInBvcHVwUHJvZmlsZUF2YXRhciIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJCdXR0b24iLCJlZGl0Rm9ybUVsZW1lbnQiLCJjYXJkRm9ybUVsZW1lbnQiLCJwcm9maWxlQXZhdGFyRWxlbWVudCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwicHJvZmlsZUF2YXRhciIsInByb2ZpbGVGb3JtTmFtZUlucHV0IiwicHJvZmlsZUZvcm1Kb2JJbnB1dCIsImFwaSIsInByb2Nlc3MiLCJhdXRob3JpemF0aW9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJoYW5kbGVMb2FkaW5nIiwiaXNMb2FkaW5nIiwicG9wdXAiLCJ0ZXh0SW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW1hZ2VQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY29uc29sZSIsImxvZyIsImdldEFwcEluZm8iLCJkZWxldGVDYXJkUG9wdXAiLCJpbml0aWFsQ2FyZHNMaXN0IiwidXNlcklkIiwiY2FyZHNMaXN0IiwiY3JlYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwibmV3Q2FyZFBvcHVwIiwiYWRkQ2FyZCIsImNhdGNoIiwiZXJyIiwiY2FyZCIsIm9wZW4iLCJzZXRTdWJtaXRIYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJzZXRJdGVtIiwiZ2VuZXJhdGVDYXJkIiwidXNlckluZm8iLCJ1c2VySW5mb1BvcHVwIiwic2V0VXNlckluZm8iLCJwcm9maWxlQXZhdGFyUG9wdXAiLCJzZXRVc2VyQXZhdGFyIiwic2V0QXZhdGFySW5mbyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==