!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(e,t,r,o){var i=t.handleCardClick,a=t.handleDeleteClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._name=e.name,this._link=e.link,this._id=e._id,this._creatorId=e.owner._id,this._likes=e.likes,this._likeCount=e.likes.length,this._userId=r,this._handleCardClick=i,this._handleDeleteClick=a,this._handleLikeClick=u,this._cardSelector=o}var r,o;return r=n,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_getId",value:function(){return this._id}},{key:"handleLikeCard",value:function(){var t,n=this._element.querySelector(".element__like-button");(t=this._likes,function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e._id===e._userId&&n.classList.add("element__like-button_active")}))}},{key:"handleLikeButtonToggle",value:function(e){e.classList.toggle("element__like-button_active")}},{key:"handleLikeCount",value:function(e){this._element.querySelector(".element__like-count").textContent=e}},{key:"handleDeleteCard",value:function(){this._element.remove()}},{key:"_hideBinIcon",value:function(){this._userId!==this._creatorId&&this._element.querySelector(".element__delete-button").classList.add("element__delete-button_type_hidden")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this.handleLikeCount(this._likeCount),this.handleLikeCard(),this._hideBinIcon(),this._element.querySelector(".element__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".element__text").textContent=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".element__image"),n=this._element.querySelector(".element__delete-button"),r=this._element.querySelector(".element__like-button");r.addEventListener("click",(function(){return e._handleLikeClick(e._getId(),r)})),n.addEventListener("click",(function(){return e._handleDeleteClick(e._getId())})),t.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})}))}}])&&t(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"loadUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,"Content-Type":"application/json",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH","Content-Type":"application/json",body:JSON.stringify({name:n,about:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:n})}).then((function(e){return t._handleResponse(e)}))}},{key:"getLikes",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteLikes",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._handleResponse(e)}))}},{key:"addNewCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:this.name,link:this.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()})),e._hideInputError(t)}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._toggleButtonState()})),this._setEventListeners()}}])&&u(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._popupElement.classList.contains("popup_opened")&&document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup__close-button")||t.target.classList.contains("popup"))&&e.close()}))}}])&&s(t.prototype,n),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(){return p(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;d(v(a.prototype),"open",this).call(this);var r=this._popupElement.querySelector(".popup__image"),o=this._popupElement.querySelector(".popup__preview-title");r.src=n,r.alt=t,o.textContent=t}}])&&h(t.prototype,n),a}(c);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmit=r,t._formElement=t._popupElement.querySelector(".popup__form"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;g(C(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){g(C(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setSubmitHandler",value:function(e){this._handleSubmit=e}}])&&k(t.prototype,n),a}(c);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}},{key:"getAvatarInfo",value:function(){return{avatar:this._avatar.src}}},{key:"setAvatarInfo",value:function(e){var t=e.avatar;this._avatar.src=t}}])&&L(t.prototype,n),e}(),O={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},j=".popup_type_edit-profile",q=".popup_type_add-card",P=".popup_type_confirm",T=".popup_type_profile-avatar",U=document.querySelector(".profile__edit-button"),A=document.querySelector(".profile__add-button"),R=document.querySelector(".profile__avatar-overlay"),B=document.querySelector(".popup__form_type_edit-profile"),x=document.querySelector(".popup__form_type_add-card"),D=document.querySelector(".popup__form_type_edit-profile-avatar"),V=document.querySelector(".profile__name"),N=document.querySelector(".profile__job"),H=document.querySelector(".profile__avatar"),J=document.querySelector(".popup__input_type_name"),M=document.querySelector(".popup__input_type_job");function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=new o({baseUrl:"https://around.nomoreparties.co/v1/".concat("group-10"),headers:{authorization:"6af9648e-23ea-4651-bc48-5ca8b1b3f30e","Content-Type":"application/json"}}),Y=new l(O,B),F=new l(O,x),G=new l(O,D);function K(e,t,n){document.querySelector(t).querySelector(".popup__button").textContent=n}Y.enableValidation(),F.enableValidation(),G.enableValidation();var Q=new m(".popup_type_preview");Q.setEventListeners(),console.log(z.getAppInfo());var W=new w({popupSelector:P});W.setEventListeners(),z.getAppInfo().then((function(e){var t,r,o=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1],l=i._id,s=new a({items:u,renderer:f},".elements__list");s.renderItems();var c=new w({popupSelector:q,handleSubmit:function(e){var t=e.name,n=e.link;K(0,q,"Saving..."),z.addCard({name:t,link:n}).then((function(e){f(e),K(0,q,"Save")})).catch((function(e){return console.log(e)}))}});function f(e){var t=new n(e,{handleCardClick:function(e){var t=e.name,n=e.link;return Q.open({name:t,link:n})},handleDeleteClick:function(e){W.open(),W.setSubmitHandler((function(){K(0,P,"Deleting..."),z.deleteCard(e).then((function(){t.handleDeleteCard(),K(0,P,"Yes")})).catch((function(e){return console.log(e)}))}))},handleLikeClick:function(e,n){n.classList.contains(".element__like-button_active")?z.deleteLikes(e).then((function(e){t.handleLikeCount(e.likes.length),t.handleLikeButtonToggle(n)})).catch((function(e){return console.error(e)})):z.getLikes(e).then((function(e){t.handleLikeCount(e.likes.length),t.handleLikeButtonToggle(n)})).catch((function(e){return console.error(e)}))}},l,"#cards-template");s.setItem(t.generateCard())}A.addEventListener("click",(function(){return c.open()})),c.setEventListeners()})).catch((function(e){return console.log(e)}));var X=new I({name:V,about:N,avatar:H}),Z=new w({popupSelector:j,handleSubmit:function(e){var t=e.name,n=e.about;K(0,j,"Saving..."),z.setUserInfo({name:t,about:n}).then((function(){X.setUserInfo({name:t,about:n})})).catch((function(e){return console.log(e)}))}});Z.setEventListeners();var ee=new w({popupSelector:T,handleSubmit:function(e){var t=e.avatar;K(0,T,"Saving..."),z.setUserAvatar({avatar:t}).then((function(e){var t=e.avatar;X.setAvatarInfo({avatar:t}),K(0,T,"Save")})).catch((function(e){return console.log(e)}))}});ee.setEventListeners(),z.loadUserInfo().then((function(e){var t=e.avatar;X.setAvatarInfo({avatar:t})})).catch((function(e){return console.log(e)})),z.loadUserInfo().then((function(e){var t=e.name,n=e.about;X.setUserInfo({name:t,about:n})})).catch((function(e){return console.log(e)})),U.addEventListener("click",(function(){var e=X.getUserInfo(),t=e.name,n=e.about;J.value=t,M.value=n,Z.open()})),R.addEventListener("click",(function(){return ee.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlXLFNBSWxDYSxFQUFjMUIsb0JBR2QsSUFBTTRCLEdBQXFCLElBQUlwRSxFQUFjLENBQzNDZixjQUFlK0IsRUFDZmYsYUFBYyxZQUFnQixJQUFiL0QsRUFBYSxFQUFiQSxPQUNmZ0csRUFBYyxFQUFNbEIsRUFBb0IsYUFDeENZLEVBQ0d5QyxjQUFjLENBQUVuSSxPQUFBQSxJQUNoQlYsTUFBSyxZQUFnQixJQUFiVSxFQUFhLEVBQWJBLE9BQ1ArSCxFQUFTSyxjQUFjLENBQUVwSSxPQUFBQSxJQUN6QmdHLEVBQWMsRUFBT2xCLEVBQW9CLFdBRTFDb0MsT0FBTSxTQUFDQyxHQUFELE9BQVNaLFFBQVFDLElBQUlXLFNBSWxDZSxHQUFtQjVCLG9CQUduQlosRUFDR2pHLGVBQ0FILE1BQUssWUFBZ0IsSUFBYlUsRUFBYSxFQUFiQSxPQUNQK0gsRUFBU0ssY0FBYyxDQUFFcEksT0FBQUEsT0FFMUJrSCxPQUFNLFNBQUNDLEdBQUQsT0FBU1osUUFBUUMsSUFBSVcsTUFFOUJ6QixFQUNHakcsZUFDQUgsTUFBSyxZQUFxQixJQUFsQnBELEVBQWtCLEVBQWxCQSxLQUFNNkQsRUFBWSxFQUFaQSxNQUNiZ0ksRUFBU0UsWUFBWSxDQUFFL0wsS0FBQUEsRUFBTTZELE1BQUFBLE9BRTlCbUgsT0FBTSxTQUFDQyxHQUFELE9BQVNaLFFBQVFDLElBQUlXLE1BRzlCcEMsRUFBa0J2RyxpQkFBaUIsU0FBUyxXQUUxQyxNQUF3QnVKLEVBQVNNLGNBQXpCbk0sRUFBUixFQUFRQSxLQUFNNkQsRUFBZCxFQUFjQSxNQUNkeUYsRUFBcUJyQixNQUFRakksRUFDN0J1SixFQUFvQnRCLE1BQVFwRSxFQUM1QmlJLEVBQWNYLFVBR2hCcEMsRUFBb0J6RyxpQkFBaUIsU0FBUyxrQkFBTTBKLEdBQW1CYixVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIHsgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrIH0sXG4gICAgdXNlckRhdGEsXG4gICAgY2FyZFNlbGVjdG9yXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2NyZWF0b3JJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9saWtlQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcblxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJEYXRhO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgaGFuZGxlTGlrZUNhcmQoKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKTtcbiAgICBbLi4udGhpcy5fbGlrZXNdLmZvckVhY2goKGxpa2UpID0+IHtcbiAgICAgIGlmIChsaWtlLl9pZCA9PT0gbGlrZS5fdXNlcklkKSB7XG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUxpa2VCdXR0b25Ub2dnbGUobGlrZUJ1dHRvbikge1xuICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIGhhbmRsZUxpa2VDb3VudCh0b3RhbExpa2VzKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRcIikudGV4dENvbnRlbnQgPVxuICAgICAgdG90YWxMaWtlcztcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9oaWRlQmluSWNvbigpIHtcbiAgICBpZiAodGhpcy5fdXNlcklkICE9PSB0aGlzLl9jcmVhdG9ySWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2RlbGV0ZS1idXR0b25fdHlwZV9oaWRkZW5cIik7XG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuaGFuZGxlTGlrZUNvdW50KHRoaXMuX2xpa2VDb3VudCk7XG4gICAgdGhpcy5oYW5kbGVMaWtlQ2FyZCgpO1xuICAgIHRoaXMuX2hpZGVCaW5JY29uKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50X19pbWFnZVwiXG4gICAgKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBwb3B1cEltYWdlUHJldmlldyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpO1xuXG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9nZXRJZCgpLCBsaWtlQnV0dG9uKVxuICAgICk7XG5cbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9nZXRJZCgpKVxuICAgICk7XG5cbiAgICBwb3B1cEltYWdlUHJldmlldy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICB9KVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcbiAgICAgIChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcylcbiAgICApO1xuICB9XG5cbiAgbG9hZFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgUHJvbWlzZSBvZiB0eXBlIFJlc3BvbnNlIHRoYXQgd2FpdHMgZm9yIHVzZXIgaW5mb3JtYXRpb24gYW5kIGNhcmQgZGF0YSBmcm9tIHNlcnZlclxuICAgKiBAcmV0dXJucyBQcm9taXNlPFJlc3BvbnNlPlxuICAgKi9cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMubG9hZFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxuXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKlJldHVybnMgYSBQcm9taXNlIG9mIHR5cGUgUmVzcG9uc2UgdGhhdCB5aWVsZHMgdXNlciBhdmF0YXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGF2YXRhciB1cmwgb2YgdGhlIHVzZXIncyBwcm9maWxlXG4gICAqIEByZXR1cm5zIFByb21pc2U8UmVzcG9uc2U+XG4gICAqL1xuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgUHJvbWlzZSBvZiB0eXBlIFJlc3BvbnNlIHRoYXQgeWllbGRzIGFcbiAgICogc2luZ2xlIGNhcmQgZ2l2ZW4gYW4gSURcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNhcmRJZCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgY2FyZFxuICAgKiBAcmV0dXJucyBQcm9taXNlPFJlc3BvbnNlPlxuICAgKi9cbiAgZ2V0TGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBhZGROZXdDYXJkKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiB0aGlzLm5hbWUsIGxpbms6IHRoaXMubGluayB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHJldHVybiByZXMuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxuXG4gIHNldEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBkaXNhYmxlIHN1Ym1pdCBidXR0b24gb24gbG9hZGluZ1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvLyB2YWxpZGF0ZSBhbGwgaW5wdXRzXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgLy8gY2hlY2sgd2hlbmV2ZXIgYW55IGZpZWxkJ3MgaW5wdXQgaXMgY2hhbmdlZFxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gYWZ0ZXIgcmVzZXR0aW5nIGZvcm0sIHZhbGlkYXRpb24gbWVzc2FnZXMgc2hvdWxkIGFsc28gcmVzZXRcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBjbG9zZSB0aGUgUG9wdXAgYnkgUHJlc3NpbmcgRXNjYXBlIGtleVxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcblxuICAgIGlmICh0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSB8fCAvLyBjbG9zZSBpY29uIG9mIHRoZSBwb3B1cFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIC8vIG91dHNpZGUgY2xpY2tcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICBzdXBlci5vcGVuKCk7XG5cbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctdGl0bGVcIik7XG4gICAgaW1hZ2Uuc3JjID0gbGluaztcbiAgICBpbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRleHQudGV4dENvbnRlbnQgPSBuYW1lO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG5cbiAgc2V0U3VibWl0SGFuZGxlcihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBhY3Rpb247XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dCA9IGFib3V0O1xuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICAvLyB0YWtlcyBuZXcgdXNlciBkYXRhIGFuZCBhZGRzIGl0IG9uIHRoZSBwYWdlXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxuICBnZXRBdmF0YXJJbmZvKCkge1xuICAgIHJldHVybiB7IGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyB9O1xuICB9XG5cbiAgc2V0QXZhdGFySW5mbyh7IGF2YXRhciB9KSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImV4cG9ydCBjb25zdCBkZWZhdWx0Rm9ybUNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IFwiI2NhcmRzLXRlbXBsYXRlXCI7XG5leHBvcnQgY29uc3QgZWxlbWVudHNMaXN0ID0gXCIuZWxlbWVudHNfX2xpc3RcIjtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJldmlldyA9IFwiLnBvcHVwX3R5cGVfcHJldmlld1wiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIjtcbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm0gPSBcIi5wb3B1cF90eXBlX2NvbmZpcm1cIjtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVBdmF0YXIgPSBcIi5wb3B1cF90eXBlX3Byb2ZpbGUtYXZhdGFyXCI7XG5cbi8vIEJ1dHRvbnNcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19hdmF0YXItb3ZlcmxheVwiXG4pO1xuXG4vLyBQb3B1cCBmb3Jtc1xuZXhwb3J0IGNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19mb3JtX3R5cGVfZWRpdC1wcm9maWxlXCJcbik7XG5leHBvcnQgY29uc3QgY2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9hZGQtY2FyZFwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LXByb2ZpbGUtYXZhdGFyXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2pvYlwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfam9iXCJcbik7XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XG5pbXBvcnQge1xuICBlZGl0Rm9ybUVsZW1lbnQsXG4gIGNhcmRGb3JtRWxlbWVudCxcbiAgZGVmYXVsdEZvcm1Db25maWcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwb3B1cEFkZENhcmQsXG4gIGNhcmRUZW1wbGF0ZSxcbiAgZWxlbWVudHNMaXN0LFxuICBwb3B1cEVkaXRQcm9maWxlLFxuICBwb3B1cFByZXZpZXcsXG4gIHBvcHVwQ29uZmlybSxcbiAgcG9wdXBQcm9maWxlQXZhdGFyLFxuICBhZGRDYXJkQnV0dG9uLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZUFib3V0LFxuICBwcm9maWxlQXZhdGFyLFxuICBwcm9maWxlQXZhdGFyRWxlbWVudCxcbiAgcHJvZmlsZUF2YXRhckJ1dHRvbixcbiAgcHJvZmlsZUZvcm1OYW1lSW5wdXQsXG4gIHByb2ZpbGVGb3JtSm9iSW5wdXQsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxLyR7cHJvY2Vzcy5lbnYuR1JPVVBfSUR9YCxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IHByb2Nlc3MuZW52LlRPS0VOLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vIEZvcm0gVmFsaWRhdG9yc1xuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihkZWZhdWx0Rm9ybUNvbmZpZywgZWRpdEZvcm1FbGVtZW50KTtcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIGNhcmRGb3JtRWxlbWVudCk7XG5jb25zdCBlZGl0QXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGRlZmF1bHRGb3JtQ29uZmlnLFxuICBwcm9maWxlQXZhdGFyRWxlbWVudFxuKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZWRpdEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIEhhbmRsZSBMb2FkaW5nXG5mdW5jdGlvbiBoYW5kbGVMb2FkaW5nKGlzTG9hZGluZywgcG9wdXAsIHRleHRJbnB1dCkge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cCkucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRleHRJbnB1dDtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIikudGV4dENvbnRlbnQgPVxuICAgICAgdGV4dElucHV0O1xuICB9XG59XG5cbi8vIFByZXZpZXcgSW1hZ2UgUG9wdXBcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBQcmV2aWV3KTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc29sZS5sb2coYXBpLmdldEFwcEluZm8oKSk7XG5cbi8vIERlbGV0ZSBjYXJkIGNvbmZpcm1hdGlvbiBwb3B1cFxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpcm0sXG59KTtcblxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIHJlbmRlciB0aGUgY2FyZHMgdG8gdGhlIERPTVxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFt1c2VyRGF0YSwgaW5pdGlhbENhcmRzTGlzdF0pID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgLy8gR2VuZXJhdGUgQ2FyZHNcbiAgICBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkc0xpc3QsXG4gICAgICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxuICAgICAgfSxcbiAgICAgIGVsZW1lbnRzTGlzdFxuICAgICk7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbiAgICAvLyBBZGQgTmV3IENhcmRcbiAgICBjb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cEFkZENhcmQsXG4gICAgICBoYW5kbGVTdWJtaXQ6ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xuICAgICAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwQWRkQ2FyZCwgXCJTYXZpbmcuLi5cIik7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5hZGRDYXJkKHsgbmFtZSwgbGluayB9KVxuICAgICAgICAgIC50aGVuKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICAgICAgaGFuZGxlTG9hZGluZyhmYWxzZSwgcG9wdXBBZGRDYXJkLCBcIlNhdmVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gc2hvdyBwb3B1cCBmb3IgYWRkaW5nIGEgbmV3IGNhcmRcbiAgICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBuZXdDYXJkUG9wdXAub3BlbigpKTtcbiAgICBuZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIENyZWF0ZSBDYXJkc1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbXMpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIHtcbiAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICh7IG5hbWUsIGxpbmsgfSkgPT4gaW1hZ2VQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KSxcbiAgICAgICAgICAvLyBEZWxldGUgQ2FyZCBQb3B1cFxuICAgICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xuICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEhhbmRsZXIoKCkgPT4ge1xuICAgICAgICAgICAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwQ29uZmlybSwgXCJEZWxldGluZy4uLlwiKTtcbiAgICAgICAgICAgICAgYXBpXG4gICAgICAgICAgICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZGluZyh0cnVlLCBwb3B1cENvbmZpcm0sIFwiWWVzXCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyBMaWtlIENhcmRcbiAgICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6IChjYXJkSWQsIGxpa2VCdXR0b24pID0+IHtcbiAgICAgICAgICAgIGlmIChsaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcIi5lbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgYXBpXG4gICAgICAgICAgICAgICAgLmRlbGV0ZUxpa2VzKGNhcmRJZClcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ291bnQoZGF0YS5saWtlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgY2FyZC5oYW5kbGVMaWtlQnV0dG9uVG9nZ2xlKGxpa2VCdXR0b24pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcGlcbiAgICAgICAgICAgICAgICAuZ2V0TGlrZXMoY2FyZElkKVxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjYXJkLmhhbmRsZUxpa2VDb3VudChkYXRhLmxpa2VzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b25Ub2dnbGUobGlrZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGNhcmRUZW1wbGF0ZVxuICAgICAgKTtcbiAgICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG4vLyBQcm9maWxlIENhcmQgRm9ybSB3aXRoIEFQSVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBwcm9maWxlTmFtZSxcbiAgYWJvdXQ6IHByb2ZpbGVBYm91dCxcbiAgYXZhdGFyOiBwcm9maWxlQXZhdGFyLFxufSk7XG5cbi8vIEVkaXQgUHJvZmlsZSBGb3JtIHdpdGggQVBJXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEVkaXRQcm9maWxlLFxuICBoYW5kbGVTdWJtaXQ6ICh7IG5hbWUsIGFib3V0IH0pID0+IHtcbiAgICBoYW5kbGVMb2FkaW5nKHRydWUsIHBvcHVwRWRpdFByb2ZpbGUsIFwiU2F2aW5nLi4uXCIpO1xuICAgIGFwaVxuICAgICAgLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH0sXG59KTtcblxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBVcGRhdGUgUHJvZmlsZSBBdmF0YXJcbmNvbnN0IHByb2ZpbGVBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBQcm9maWxlQXZhdGFyLFxuICBoYW5kbGVTdWJtaXQ6ICh7IGF2YXRhciB9KSA9PiB7XG4gICAgaGFuZGxlTG9hZGluZyh0cnVlLCBwb3B1cFByb2ZpbGVBdmF0YXIsIFwiU2F2aW5nLi4uXCIpO1xuICAgIGFwaVxuICAgICAgLnNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSlcbiAgICAgIC50aGVuKCh7IGF2YXRhciB9KSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckluZm8oeyBhdmF0YXIgfSk7XG4gICAgICAgIGhhbmRsZUxvYWRpbmcoZmFsc2UsIHBvcHVwUHJvZmlsZUF2YXRhciwgXCJTYXZlXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSxcbn0pO1xuXG5wcm9maWxlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gSW5pdGlhbCBwYWdlIGxvYWQgLSB1cGRhdGUgdXNlciBpbmZvIGFuZCBhdmF0YXJcbmFwaVxuICAubG9hZFVzZXJJbmZvKClcbiAgLnRoZW4oKHsgYXZhdGFyIH0pID0+IHtcbiAgICB1c2VySW5mby5zZXRBdmF0YXJJbmZvKHsgYXZhdGFyIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbmFwaVxuICAubG9hZFVzZXJJbmZvKClcbiAgLnRoZW4oKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyBwcmVwb3B1bGF0ZSBwcm9maWxlIGZvcm0gYXQgZmlyc3QgY2xpY2tcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUZvcm1OYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlRm9ybUpvYklucHV0LnZhbHVlID0gYWJvdXQ7XG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHByb2ZpbGVBdmF0YXJQb3B1cC5vcGVuKCkpO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidXNlckRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfY3JlYXRvcklkIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlQ291bnQiLCJsZW5ndGgiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImxpa2VCdXR0b24iLCJfZWxlbWVudCIsImZvckVhY2giLCJsaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwidG9nZ2xlIiwidG90YWxMaWtlcyIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlTGlrZUNvdW50IiwiaGFuZGxlTGlrZUNhcmQiLCJfaGlkZUJpbkljb24iLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInBvcHVwSW1hZ2VQcmV2aWV3IiwiZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9nZXRJZCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJhbGwiLCJsb2FkVXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYXZhdGFyIiwiY2FyZElkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImUiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJ0ZXh0Iiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImFjdGlvbiIsIlVzZXJJbmZvIiwiX2Fib3V0IiwiX2F2YXRhciIsImRlZmF1bHRGb3JtQ29uZmlnIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwQWRkQ2FyZCIsInBvcHVwQ29uZmlybSIsInBvcHVwUHJvZmlsZUF2YXRhciIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJCdXR0b24iLCJlZGl0Rm9ybUVsZW1lbnQiLCJjYXJkRm9ybUVsZW1lbnQiLCJwcm9maWxlQXZhdGFyRWxlbWVudCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwicHJvZmlsZUF2YXRhciIsInByb2ZpbGVGb3JtTmFtZUlucHV0IiwicHJvZmlsZUZvcm1Kb2JJbnB1dCIsImFwaSIsInByb2Nlc3MiLCJhdXRob3JpemF0aW9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJoYW5kbGVMb2FkaW5nIiwiaXNMb2FkaW5nIiwicG9wdXAiLCJ0ZXh0SW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW1hZ2VQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY29uc29sZSIsImxvZyIsImdldEFwcEluZm8iLCJkZWxldGVDYXJkUG9wdXAiLCJpbml0aWFsQ2FyZHNMaXN0IiwidXNlcklkIiwiY2FyZHNMaXN0IiwiY3JlYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwibmV3Q2FyZFBvcHVwIiwiYWRkQ2FyZCIsImNhdGNoIiwiZXJyIiwiY2FyZCIsIm9wZW4iLCJzZXRTdWJtaXRIYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJkZWxldGVMaWtlcyIsImhhbmRsZUxpa2VCdXR0b25Ub2dnbGUiLCJlcnJvciIsImdldExpa2VzIiwic2V0SXRlbSIsImdlbmVyYXRlQ2FyZCIsInVzZXJJbmZvIiwidXNlckluZm9Qb3B1cCIsInNldFVzZXJJbmZvIiwicHJvZmlsZUF2YXRhclBvcHVwIiwic2V0VXNlckF2YXRhciIsInNldEF2YXRhckluZm8iLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=